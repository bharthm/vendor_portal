sap.ui.define(["zmmsubcontract/controller/BaseController","sap/m/MessageBox","sap/m/MessageToast","zmmsubcontract/model/formatter"],function(e,t,r,o){return e.extend("zmmsubcontract.controller.asncrt",{formatter:o,onInit:function(){e.prototype.onInit.apply(this);this.oRouter=this.getOwnerComponent().getRouter();this.oRouter.attachRoutePatternMatched(this._onObjectMatched,this);this._localModel=this.getOwnerComponent().getModel("local")},_onObjectMatched:function(e){this._refreshView()},_refreshView:function(){debugger;var e=this.getOwnerComponent().getModel("selectedRecords");var t=new sap.ui.model.json.JSONModel;t.setData(e.oData);this.getView().setModel(t,"regasnmodel")},onSaveASN:function(e){oModel=this.getOwnerComponent().getModel("asncrt");this.getView().setModel(oModel);var r=this._localModel.getProperty("/asnData");var o=this.getView().byId("datePicker");var s=this.getView().byId("datePicker_ed");var a=this.getView().byId("datePicker_lr");var i=o.getValue();var n=s.getValue();var l=a.getValue();r.Dcdate=i;r.exDelvDate=n;r.Lrdate=l;var d=this.byId("idSelASN");var c=d.getItems();var u=[];debugger;c.forEach(function(e,t){var o=e.getCells();debugger;t=t+1;if(t===1){r.Exnum1=o[0].mProperties.text,r.Menge1=o[8].mProperties.value;r.Werks=o[2].mProperties.text,r.Lifnr=o[3].mProperties.text,r.Ebeln=o[10].mProperties.text,r.Ebelp=o[11].mProperties.text,r.Matnr=o[4].mProperties.text}else if(t===2){r.Exnum2=o[0].mProperties.text,r.Menge2=o[8].mProperties.value}else if(t===3){r.Exnum3=o[0].mProperties.text,r.Menge3=o[8].mProperties.value}else if(t===4){r.Exnum4=o[0].mProperties.text,r.Menge4=o[8].mProperties.value}else{}});var g=this.byId("idRadioGroup");var m=g.getSelectedIndex();if(m===0){r.Jobstat="C"}else if(m===1){r.Jobstat="N"}debugger;u.push(r);debugger;var p="CreateBatchGroup";oModel.setDeferredGroups([p]);oModel.create("/ZET_ASN_CRTSet",r,{success:function(){debugger;t.success("Updated successfully",{onClose:function(){this.oRouter.navTo("RegASN")}.bind(this)})},error:function(e){debugger;console.log(e);t.error(JSON.parse(e.responseText).error.innererror.errordetails[0].message)}})},onChange:function(e){var t=e.getParameter("state");var r=this.byId("idSecVend");r.setVisible(t);var o=this.byId("idLifn2");o.setVisible(t)}})});
//# sourceMappingURL=asncrt-dbg.controller.js.map