sap.ui.define(["zmmsubcontract/controller/BaseController","sap/m/MessageBox","sap/m/MessageToast","sap/ui/model/json/JSONModel","sap/ui/core/Fragment","sap/ui/core/date/UI5Date","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/m/PDFViewer"],function(e,t,r,a,n,i,o,s,d){"use strict";return e.extend("zmmsubcontract.controller.asnstatus",{_data:{dtValue:i.getInstance(),dtPattern:undefined},onBeforeRendering:function(){debugger;var e=this.getView().getModel();e.refresh(true)},onInit:function(){e.prototype.onInit.apply(this);this._localModel=this.getOwnerComponent().getModel("local");debugger;this.oRouter=this.getOwnerComponent().getRouter();this.oRouter.attachRoutePatternMatched(this._onObjectMatched,this);this._readData();this.oRouter=this.getOwnerComponent().getRouter()},_readData:function(){var e=this.getOwnerComponent().getModel("asncrt");e.refreshMetadata();e.refresh(true);this.getView().byId("idasnStat").setModel(e);var r=this;sap.ui.core.BusyIndicator.show(0);this.getOwnerComponent().setModel(e,"defaultModel");e.read("/ZET_ASN_STATSet",{success:function(e,t){debugger;sap.ui.core.BusyIndicator.hide();var a=new sap.ui.model.json.JSONModel;a.setData(e.results);r.getView().setModel(a,"asnrepModel")},error:function(e){debugger;console.log(e);t.error(JSON.parse(e.responseText).error.innererror.errordetails[0].message)}})},onRowSelect:function(){alert("Triggered")},onSearchVendor:function(e){this._applySearchFilter("Lifnr",e.getParameter("query"))},_onObjectMatched:function(e){debugger;this._readData()},_refreshView:function(){var e=this.byId("idRegASN");debugger;e.removeSelections(true)},onSearchVendor:function(e){this._applySearchFilter("Lifnr",e.getParameter("query"))},onSearchWerks:function(e){this._applySearchFilter("Werks",e.getParameter("query"))},_applySearchFilter:function(e,t){var r=[];if(t&&t.length>0){var a=new o(e,s.Contains,t);r.push(a)}var n=this.byId("idDetail");var i=n.getBinding("items");i.filter(r,"Application")},_selectedData:function(e){debugger;var t=e.getParameter("listItem");var r=t.getBindingContext("default");var a=r.getProperty("Lifnr");var n=r.getProperty("Werks");var i=r.getProperty("Op_matnr");var o=r.getProperty("Ip_Matnr");var s=r.getProperty("Maktx");var d=r.getProperty("Meins");var u=r.getProperty("Balqty");var g=r.getProperty("bprme");var l=r.getProperty("Exnum");var c={};c.vendor=a;c.plant=n;c.outputmat=i;c.inputmat=o;c.desc=s;c.uom=d;c.balqty=u;c.bprme=g;c.dano=l;var f=new sap.ui.model.json.JSONModel;f.setData(c);this.getOwnerComponent().setModel(f,"ASNMODEL")},captureRecordEH:function(e){this._selectedData(e);debugger;this.displayCrtAsnEH()},displayCrtAsnEH:function(){this.oRouter.navTo("subconASNcr")},onPreviewPDF:function(e){var t=e.getSource();var r=t.getBindingContext("default");var a=r.getObject();var n=this.getView();var i=n.getModel();var o=new d;this.getView().addDependent(o);var s=i.sServiceUrl;var u="/zdapdfSet(Werks='"+a.Werks+"',Lifnr='"+a.Lifnr+"',Exnum='"+a.Exnum+"',Exdat='"+a.Exdat+"')/$value";var g=s+"/zdapdfSet(Werks='"+a.Werks+"',Lifnr='"+a.Lifnr+"',Exnum='"+a.Exnum+"',Exdat='"+a.Exdat+"')/$value";o.setSource(g);o.setTitle("DA PDF");o.open()},onASN:function(e){debugger;var t=e.getParameter("newValue");var r=this.byId("idasnStat");var a=r.getBinding("items");var n=[];if(t&&t.length>0){var i=new o("Asnno",s.Contains,t);n.push(new o({filters:[i],and:false}))}a.filter(n)},onDCnumb:function(e){debugger;var t=e.getParameter("newValue");var r=this.byId("idasnStat");var a=r.getBinding("items");var n=[];if(t&&t.length>0){var i=new o("Dcno",s.Contains,t);n.push(new o({filters:[i],and:false}))}a.filter(n)},onInv:function(e){debugger;var t=e.getParameter("newValue");var r=this.byId("idasnStat");var a=r.getBinding("items");var n=[];if(t&&t.length>0){var i=new o("Ebeln",s.Contains,t);n.push(new o({filters:[i],and:false}))}a.filter(n)},onDCdate:function(e){debugger;var t=e.getParameter("newValue");var r=this.byId("idasnStat");var a=r.getBinding("items");var n=[];if(t&&t.length>0){var i=new o("Dcdat",s.Contains,t);n.push(new o({filters:[i],and:false}))}a.filter(n)},formatDate:function(e){if(e){var t=sap.ui.core.format.DateFormat.getDateTimeInstance({pattern:"dd-MM-yyyy"});return t.format(new Date(e))}return e},formatZeroValue:function(e){debugger;return e===null?"":e},jobstatff:function(e){if(e){return e==="C"?"/images/GTICK.jpg":"/images/RCROSS.jpg"}return e}})});
//# sourceMappingURL=asnstatus-dbg-dbg-dbg-dbg-dbg.controller.js.map